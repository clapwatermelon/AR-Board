<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="util">
	<select id="selectFriendList" parameterType="hashmap"
		resultType="hashmap">
        <![CDATA[ 
        	SELECT id, username , userEmail 
        	FROM user JOIN relationship ON user.id=relationship.id2  
        	WHERE relationship.id1=#{id} and state='Y';
        ]]>
	</select>
	<select id="selectUserToEmail" parameterType="hashmap"
		resultType="hashmap">
        <![CDATA[ 
        	SELECT id,userName,userEmail,IFNULL(state,'N') as state 
        	FROM user LEFT JOIN (
        		SELECT id1,id2,state 
        		FROM relationship 
        		WHERE id1=#{id}
        		) as relationship
        		ON id=id2 
        	WHERE userEmail=#{email};
        ]]>
	</select>  
</mapper>